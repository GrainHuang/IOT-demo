<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>虚拟付款</title>
</head>
<body style="text-align:center;margin-top:40px">

<h2 id="title"></h2>

<button
  style="font-size:20px;padding:15px 40px"
  onclick="pay()">
  虚拟付款
</button>

<p id="status"></p>

<script>
const WRITE_KEY = "1ZREBUT1AFCZMB2R"; // 你的 ThingSpeak 写入密钥

const params = new URLSearchParams(location.search);
const product = params.get("product");

document.getElementById("title").innerText =
  `商品 ${product} 支付确认`;

let paid = false;

function pay() {
  if (paid) return;

  paid = true;
  document.getElementById("status").innerText = "支付中...";

  fetch(`https://api.thingspeak.com/update?api_key=${WRITE_KEY}&field${product}=1`)
    .then(() => {
      document.getElementById("status").innerText =
        "支付成功，正在出货";
    });
}
</script>

</body>
</html>

